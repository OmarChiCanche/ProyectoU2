<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caso4</title>
   

    <body>
        <style>/*LE DA UN ESTILO AL MENU DONDE SE TIENE LOS CASOS */
            ul {
              list-style-type: none;
              margin: 0;
              padding: 0;
              overflow: hidden;
              background-color: #333;
            }
            
            li {
              float: left;
            }
            
            li a {
              display: block;
              color: white;
              text-align: center;
              padding: 14px 16px;
              text-decoration: none;
            }
            
            li a:hover {
              background-color: #111;
            }
            </style>
        <body>
            <div>
                <h1>Lenguaje y Automatas ll</h1><!-- SE MUESTRA EN EL LA PANTALLA ETIQUETA DE TEXTO -->
                <h3>Codigo Intermedio</h3><!-- SE MUESTRA EN EL LA PANTALLA ETIQUETA DE TEXTO -->
                <div id="navigation"><!-- MENU PARA LOS CASOS  -->
                    <ul id="menu-bar">
                        <li><a href="Caso1.html">CASO 1</a></li><!-- MENU PARA LOS CASOS  -->
                        <li><a href="Caso2.html">CASO 2</a></li><!-- MENU PARA LOS CASOS  -->
                        <li><a href="Caso3.html">CASO 3</a></li><!-- MENU PARA LOS CASOS  -->
                        <li><a href="Caso4.html">CASO 4</a></li><!-- MENU PARA LOS CASOS  -->
                        <li><a href="Caso5.html">CASO 5</a></li><!-- MENU PARA LOS CASOS  -->
                       </ul>
                
                </div>
  
<div>
    <p>CASO 5</p><!-- Titulo del caso -->
    <button>X =</button><input type="text" name="Dato" id='exp5'value= "2*y - ((4*y) + z)"><br></br><!-- Declaramos un input con el valor de la expresion -->
    <button type="button" onclick="caso5()">GenerarCodigo</button><br> <!-- Obtenemos la funcion del caso4 -->
    <h2>RESULTADO</h2></br><textarea name="textarea5" id="res5" cols="20" rows="10" wrap="hard"></textarea><br><!--Colocamos un TextArea para imprimir el codigo en triplos -->
    
</div>
<script>
 function caso5(){
        var expIng5 = document.getElementById("exp5").value; //Se obtiene la expresión ingresada y se guarda en una variable
        document.getElementById("exp5").innerHTML=expIng5; //se le asigna el valor de exp5 a expIng5
        let cParOpen; var text = ""; var x;  let t; let a; let t2; var arreg1 =["ini"]; var i4=0; var i5=0; var i3=0; var j=0; var c=0;//Variables a utilizar
        var parent =/\(( |)[a-zA-Z0-9]{1,}( |\[\d\]{1}|)( |)(\*|\/|\+|\-)( |)[a-zA-Z0-9]{1,}( |\[\d\]{1}|)( |)\)/gm;            //La variable parentesis contiene la expresión regular que ayuda a encontrar cualquier operación que este dentro de parentesis
        var parOpen=/\(/gm; 
        cParOpen=expIng5.match(parOpen); 
        var conteoParent=cParOpen.length;//para saber la cantidad de parentesis que existen
        var prinSign = /[a-zA-Z0-9]{1,}(\d{1,}| |\[\d\]{1}|)( |)(\*|\/)( |)([a-zA-Z0-9]{1,}(\d{1,}| |\[\d\]{1}|))/gm;//expresion para encontrar / ó *
        var seconSign = /[a-zA-Z0-9]{1,}(\d{1,}| |\[\d\]{1}|)( |)(\+|\-)( |)([a-zA-Z0-9]{1,}(\d{1,}| |\[\d\]{1}|))/gm; //expresion para encontrar + ó -
        var signMa=/( |)(\*|\/)( |)/gm;
        var signMe=/( |)(\+|\-)( |)/gm;
        var mensR =/[a-zA-Z0-9]{1,}\[\d\]{1}/gm;
        t = expIng5.match(parent);  //t contendra el total de parentesis encontrados
        while(i3 < conteoParent){  //conteo del total de parentesis sea menor a 3
            t2 = expIng5.match(parent); //entonces t2 tendra las expresiones
            t[c]=t2[0];  //a t en la posicion c se le asigna el valor de t2 en la posicion 0
            for(j=0; j<1; j++){ 
                text += "t[" +c + "] = "+ t[c] + "\n"; //text contendra la operacion para asi desarrolar la expresion
                arreg1[c] = "t[" +c + "]"; //arreg1 almacena las variables temporales
                expIng5 = expIng5.replace(t[c],arreg1[c]); 
                c++  
            }    i3++
        }                    
        let vva1; vva1 = expIng5.match(signMa);
        if(vva1==null){ //en caso de que no hayan signos /y* se contnua con +y-
            let var2=expIng5.match(signMe); //por lo tanto var2 almacena la expresion con los signos de + y -
            var v3=var2.length; //asi v3 obtiene operaciones con + y - 
            while(i5 < v3){                                     
                t2 = expIng5.match(seconSign); //t2 almacena las operaciones que tienen los signos + o -
                t[c]=t2[0]; //t en c da resultado lo que contenga t2 en 0
                for(j=0; j<1; j++){                             
                    text += "t[" +c + "] = "+ t[c] + "\n";//text contendra la operacion para asi desarrolar la expresion
                    arreg1[c] = "t[" +c + "]";//arreg1 almacena las variables temporales
                    expIng5 = expIng5.replace(t[c],arreg1[c]); //Sustituimos la expresion por lo que contiene el temporal arreg1     
                    c++     
                }    i5++  
            }               
            document.getElementById("res5").innerHTML=text; //enviamos el valor al textarea5
        }
       let var1=expIng5.match(signMa); var v1=var1.length;  //a v1 le ponemos la cantidad de los signos / y * al terminar el ciclo
       while(i4 < v1){   //Mientras i4 sea menor a los signos se repite
            t2 = expIng5.match(prinSign);  //t2 almacena las operaciones que tienen los signos * o /.
            t[c]=t2[0]; //t en c da resultado lo que contenga t2 en 0
            for(j=0; j<1; j++){ 
                text += "t[" +c + "] = "+ t[c] + "\n";//text contendra la operacion para asi desarrolar la expresion
               arreg1[c] = "t[" +c + "]";//arreg1 almacena las variables temporales
                expIng5 = expIng5.replace(t[c],arreg1[c]); //Sustituimos la expresion por lo que contiene el temporal arreg1
                c++              
            }    i4++           
        }              
       let vsig1=expIng5.match(mensR); var vs1=vsig1.length; //almacenara la cantidad de temprales que ya hayan existido
       if(vs1==1){//Si la expresion solo tiene una operación entonces muestra el resultado
        document.getElementById("res5").innerHTML=text; //enviamos el valor al textarea5
       }                                                              
       let var2=expIng5.match(signMe); var v3=var2.length;  //La variable v3 contiene la cantidad de operaciones con signos + o - que existen en la expresión.
       if(v3>0){  
            while(i5 < v3){ // i5 menor a los signos encontrados repite el ciclo          
                t2 = expIng5.match(seconSign);//t2 almacena las operaciones que tienen los signos - o +.
                t[c]=t2[0]; //t en c da resultado lo que contenga t2 en 0
                for(j=0; j<1; j++){
                    text += "t[" +c + "] = "+ t[c] + "\n";//text contendra la operacion para asi desarrolar la expresion
                    arreg1[c] = "t[" +c + "]"; //arreg1 almacena las variables temporales                                //El arreglo sup[], almacena todos los temporales que estamos utilizando.Por ejemplo: t[0], t[1]
                    expIng5 = expIng5.replace(t[c],arreg1[c]); //Sustituimos la expresion por lo que contiene el temporal arreg1
                    c++ 
                }    i5++       
            }           
            document.getElementById("res5").innerHTML=text; //enviamos el valor al textarea5
                   }    //Fin del if
    }   //Fin de la función caso5()
</script>
</body>